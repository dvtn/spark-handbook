Mind Map generated by NB MindMap plugin   
> __version__=`1.1`,showJumps=`true`
---

# SparkSQL

## SparkSQL

### 支持使用sql查询分布式的数据

### 用SparkSQL查询数据，先要创建SQLContext

### SparkSQL底层是DataFrame

## SparkSQL演变

### Hive \-\> Shark \-\> SparkSQL中支持在Hive中的语法，支持在Shark中的语法

### SparkSQL可以操作RDD

### SparkSQL完全脱离Hive

### SparkSQL查询出来的DataFrame还可以转换成RDD

## 两种组合

### Hive on Spark: Shark

#### Hive: 解析优化，存储

#### Spark: 计算引擎

### Hive on Spark: SparkSQL

#### Hive: 存储

#### 解析优化、执行引擎

## DataFrame

### 底层是一个Row类型的RDD

### DataFrame更像一张二维表格

### DataFrame有数据，有列的schema信息

## 创建DataFrame的方式

### 读取json文件

### 读取json格式的RDD

### 读取普通的RDD

#### 1\.通过反射的方式

##### 1\.自定义类要实现序列化

##### 2\.加载成的DataFrame中列会按照ascii排序

##### 3\.自定义类的访问级别是public

#### 2\.通过动态创建schema

##### 1\.创建row顺序要和动态创建schema的顺序一致

##### 2\.生成的DataFrame不会按照列的ascii排序

### 读取Parque文件加载RDD
